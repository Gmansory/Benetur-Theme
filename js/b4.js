$(document).ready(function(){ $('#user_register_btn').attr('disabled', true).css({ opacity: 0.5 }); $('#restore_password_btn').attr('disabled', true).css({ opacity: 0.5 }); $('.quick_login_btn').click(function(e){ e.preventDefault(); var userName = $('.login_form #user_name').val(); var userPass = $('.login_form #user_password').val(); if((userName == '') || (userPass == '')) { alert('áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ”áƒ— áƒ›áƒáƒœáƒáƒªáƒ”áƒ›áƒ”áƒ‘áƒ˜ áƒáƒ•áƒ¢áƒáƒ áƒ˜áƒ–áƒáƒªáƒ˜áƒ˜áƒ¡áƒáƒ—áƒ•áƒ˜áƒ¡'); return; } $.get( "modules/user/oper_Login.php?isAjax=1&user_email="+ userName +"&user_password="+userPass, function( data ) { //alert(data); if(data == 1) { $( "#quick_login_form" ).html( '
áƒ—áƒ¥áƒ•áƒ”áƒœ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ˜áƒ— áƒ’áƒáƒ˜áƒáƒ áƒ”áƒ— áƒáƒ•áƒ¢áƒáƒ áƒ˜áƒ–áƒáƒªáƒ˜áƒ

' ); }else{ alert( "áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒšáƒ˜áƒ¡ áƒ¡áƒáƒ®áƒ”áƒšáƒ˜ áƒáƒœ áƒžáƒáƒ áƒáƒšáƒ˜ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ" ); } }); }) // ---------- subscribe ----------------------- $('#submit_subscribe').click(function(e){ e.preventDefault(); var rnd = Math.floor((Math.random()*10)+1); var sbc_email = $('#em').val(); //sbc_email = sbc_email.replace("@","|"); if(sbc_email == '') { alert('áƒ’áƒ—áƒ®áƒáƒ•áƒ— áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ”áƒ— áƒ”áƒš. áƒ¤áƒáƒ¡áƒ¢áƒ˜áƒ¡ áƒ›áƒ˜áƒ¡áƒáƒ›áƒáƒ áƒ—áƒ˜'); return; } $.get( "modules/subscribe_newsletter/subscribe.php?em="+ sbc_email + "&rnd=" + rnd, function( data ) { //alert(data); $( "#subscribe_response" ).html(data); }); }) //------------- EOF .subscribe ----------------- $('#user_email').focusout(function() { var user_email = $('#user_email').val(); var email_test = isValidEmailAddress(user_email); if(!email_test) { $('#avtorisation_error').html('áƒ”áƒš. áƒ¤áƒáƒ¡áƒ¢áƒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ'); }else{ $.get( "modules/user/user_register.php?op=check_email&user_email="+ user_email, function( data ) { // alert(data); if(data == 1) { $('#avtorisation_error').html('áƒ”áƒš. áƒ¤áƒáƒ¡áƒ¢áƒ áƒ£áƒ™áƒ•áƒ” áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜áƒ'); $('#user_register_btn').attr('disabled', true).css({ opacity: 0.5 }); }else if(data == 2) { $('#avtorisation_error').html('áƒ”áƒš. áƒ¤áƒáƒ¡áƒ¢áƒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ'); $('#user_register_btn').attr('disabled', true).css({ opacity: 0.5 }); }else{ $('#avtorisation_error').html(''); $('#user_register_btn').attr('disabled', false).css({ opacity: 1 }); } }); } }) $('#user_register_btn').click(function(e){ e.preventDefault(); var user_email = $('#user_email').val(); var user_password = $('#user_password').val(); var user_repassword = $('#user_repassword').val(); var email_test = isValidEmailAddress(user_email); if(!email_test) { $('#avtorisation_error').html('áƒ”áƒš. áƒ¤áƒáƒ¡áƒ¢áƒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ'); return; } if(user_password.length < 6) { $('#avtorisation_error').html('áƒžáƒáƒ áƒáƒšáƒ˜ áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ“áƒ’áƒ”áƒ‘áƒáƒ“áƒ”áƒ¡ áƒ›áƒ˜áƒœáƒ˜áƒ›áƒ£áƒ› 6 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒáƒ¡áƒáƒ’áƒáƒœ'); return; } if(user_password != user_repassword) { $('#avtorisation_error').html('áƒ’áƒ—áƒ®áƒáƒ•áƒ— áƒ¡áƒ¬áƒáƒ áƒáƒ“ áƒ’áƒáƒ˜áƒ›áƒ”áƒáƒ áƒ”áƒ— áƒžáƒáƒ áƒáƒšáƒ˜'); return; } $.get("modules/user/user_register.php?op=add_user&user_email="+ user_email +"&password="+ user_password +"&rep_password="+ user_repassword , function( data ) { if(data == 3) { $('#avtorisation_error').html('áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒáƒªáƒ˜áƒ áƒ“áƒáƒ¡áƒ áƒ£áƒšáƒ”áƒ‘áƒ£áƒšáƒ˜áƒ 
áƒ˜áƒœáƒ¡áƒ¢áƒ áƒ£áƒ¥áƒªáƒ˜áƒ áƒ’áƒáƒ›áƒáƒ’áƒ–áƒáƒ•áƒœáƒ˜áƒšáƒ˜áƒ áƒ”áƒš. áƒ¤áƒáƒ¡áƒ¢áƒáƒ–áƒ”'); $('#user_email').val(''); $('#user_password').val(''); $('#user_repassword').val(''); $('#user_register_btn').attr('disabled', true).css({ opacity: 0.5 }); return; }else{ $('#avtorisation_error').html('áƒ“áƒáƒ¤áƒ˜áƒ¥áƒ¡áƒ˜áƒ áƒ“áƒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ. áƒ’áƒ—áƒ®áƒáƒ•áƒ— áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ—áƒáƒ•áƒ˜áƒ“áƒáƒœ'); } }) }) //////////////////////////////////////////// $('#password_recover').click(function(e){ e.preventDefault(); $("#avtorisation_form").hide(300); $("#restore_password").show(300); }) $('#back_in_login_form').click(function(e){ e.preventDefault(); $("#restore_password").hide(300); $("#avtorisation_form").show(300); }) ///////////////////////////////////////////// $('#restore_email').focusout(function(e) { e.preventDefault(); var restore_email = $('#restore_email').val(); var email_test = isValidEmailAddress(restore_email); if(!email_test) { $('#restorepass_error').html('áƒ”áƒš. áƒ¤áƒáƒ¡áƒ¢áƒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ'); $('#restore_password_btn').attr('disabled', true).css({ opacity: 0.5 }); }else{ $('#restore_password_btn').attr('disabled', false).css({ opacity: 1 }); } }) //////////////////////// $('#restore_password_btn').click(function(e){ e.preventDefault(); var restore_email = $('#restore_email').val(); var email_test = isValidEmailAddress(restore_email); if(!email_test) { $('#restorepass_error').html('áƒ”áƒš. áƒ¤áƒáƒ¡áƒ¢áƒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ'); }else{ $('#restorepass_error').html(''); $.get( "modules/user/password_restore.php?op=restore_password&restore_email="+ restore_email, function( data ) { var error_msg = ''; if(data == 0) { error_msg = 'áƒžáƒáƒ áƒáƒšáƒ˜áƒ¡ áƒáƒ¦áƒ“áƒ’áƒ”áƒœáƒ áƒ¨áƒ”áƒ£áƒ«áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ, áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ›áƒáƒ’áƒ•áƒ˜áƒáƒœáƒ”áƒ‘áƒ˜áƒ—'; }else{ $('#restore_email').val(''); error_msg = 'áƒžáƒáƒ áƒáƒšáƒ˜áƒ¡ áƒáƒ¦áƒ“áƒ’áƒ”áƒœáƒ˜áƒ¡ áƒ˜áƒœáƒ¡áƒ¢áƒ áƒ£áƒ¥áƒªáƒ˜áƒ áƒ’áƒáƒ›áƒáƒ’áƒ–áƒáƒ•áƒœáƒ˜áƒšáƒ˜áƒ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ”áƒš áƒ¤áƒáƒ¡áƒ¢áƒáƒ–áƒ”'; } $('#restorepass_error').html(error_msg); }); } }) }) /////////////////////////////// function isValidEmailAddress(emailAddress) { var pattern = new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i); return pattern.test(emailAddress); } //////////////////////////////// function kidsPicherCheck(short_page){ var kids_picker_value = $('#kids_picker').val(); if(short_page == 1) { $('#age_1').attr('disabled', true).css({ opacity: 0.5 }); $('#age_2').attr('disabled', true).css({ opacity: 0.5 }); $('#age_3').attr('disabled', true).css({ opacity: 0.5 }); }else{ $('#age_1').attr('disabled', true).css({ opacity: 0.5 }).val(''); $('#age_2').attr('disabled', true).css({ opacity: 0.5 }).val(''); $('#age_3').attr('disabled', true).css({ opacity: 0.5 }).val(''); } //alert(kids_picker_value); switch(kids_picker_value) { case '1' : $('#age_1').attr('disabled', false).css({ opacity: 1 }); break; case '2' : $('#age_1').attr('disabled', false).css({ opacity: 1 }); $('#age_2').attr('disabled', false).css({ opacity: 1 }); break; case '3' : $('#age_1').attr('disabled', false).css({ opacity: 1 }); $('#age_2').attr('disabled', false).css({ opacity: 1 }); $('#age_3').attr('disabled', false).css({ opacity: 1 }); break; } } 